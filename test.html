<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸŒ² Evergreen Pact â€” Two Paths, Clear Steps | Adam Neil Arafat for Congress</title>
  <meta name="description" content="Two ladders for 2027. Path A if Democrats win the House and Senate. Path B if Democrats win the House only. Click Pass or Fail to reveal the next branch and updated chances." />
  <meta name="theme-color" content="#0d3b66" />

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Evergreen Pact â€” Two Paths, Clear Steps" />
  <meta property="og:description" content="Two ladders for 2027. Each step helps working people without raising their taxes and restores checks and balances to the full legal extent." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="../assets/evergreen-tree.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Evergreen Pact â€” Two Paths, Clear Steps" />
  <meta name="twitter:description" content="Two ladders for 2027. Each step helps working people without raising their taxes and restores checks and balances." />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>

  <style>
    :root{
      --primary:#0d3b66; --ink:#1b2634; --soft:#f6f9fc;
      --t0:#284b63; --t1:#0b6e4f; --t2:#0d3b66; --t3:#7a3e9d; --t4:#1f6feb; --t5:#c1121f;
      --ok:#198754; --bad:#c1121f; --flash:#fff3cd;
    }
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--soft);color:var(--ink)}
    a{color:var(--primary);text-decoration:none}
    a:hover{text-decoration:underline}
    .navbar .nav-link{position:relative;padding:.25rem .5rem;font-weight:600;color:#122133}
    .navbar .nav-link::after{content:"";position:absolute;left:0;bottom:-4px;height:2px;width:0;background:currentColor;border-radius:2px;transition:width .18s}
    .navbar .nav-link:hover::after,.navbar .nav-link.active::after{width:100%}

    .hero{position:relative;background:#0b3157;color:#fff}
    .hero::before{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.25),rgba(0,0,0,.35))}
    .hero .container{position:relative;z-index:1}
    .hero h1{font-weight:900;letter-spacing:.3px;text-shadow:0 2px 10px rgba(0,0,0,.4)}
    .Overview-btn{border-width:2px;font-weight:800}      /* FIXED selector */
    .btn-pill{border-radius:999px;padding:.55rem 1rem}
    .btn-icon i{margin-right:.5rem}

    .nav-pills .nav-link{font-weight:700}
    .tier-header{display:flex;align-items:center;gap:.75rem;margin:1.25rem 0 .75rem 0;color:#fff;border-radius:14px;padding:.75rem 1rem;box-shadow:0 8px 18px rgba(0,0,0,.12)}
    .badge-xl{display:inline-flex;align-items:center;justify-content:center;min-width:40px;height:40px;border-radius:10px;background:rgba(255,255,255,.18);font-weight:800}
    .tier-title{margin:0}
    .card-step{border:1px solid rgba(0,0,0,.06);border-radius:16px;background:#fff;box-shadow:0 6px 20px rgba(0,0,0,.06)}
    .card-step .card-body{padding:1rem 1.1rem}
    .chip{font-size:.72rem;font-weight:800;padding:.2rem .5rem;border-radius:999px;background:#eef6ff;color:#0d3b66}
    .chip-parallel{background:#e7f7ef;color:#0b6e4f}
    .odds{font-size:.92rem}
    .odds strong{white-space:nowrap}
    .odds .odds-now.flash{background:var(--flash);transition:background .6s ease}
    .mini{font-size:.92rem;color:#334155}
    .btn-outline-dark{border-width:2px}
    .nextBox{background:#f7fafc;border:1px solid #e6ebf2;border-radius:12px;padding:.6rem .75rem}
    .locked{display:none !important}
    .crumb{font-size:.8rem;color:#5b748f}

    .effect-panel{background:#f8fbff;border:1px solid #dbe7f5;border-radius:12px}
    .effect-header{padding:.55rem .75rem;cursor:pointer;display:flex;align-items:center;justify-content:space-between}
    .effect-title{font-weight:700;font-size:.95rem;color:#0d3b66;margin:0}
    .effect-body{padding:.55rem .9rem}

    .highlight{outline:3px solid #f5c542; box-shadow:0 0 0 6px rgba(245,197,66,.25)}
    footer{background:#0d3b66;color:#fff;padding:1.25rem 0}

    .t0{background:linear-gradient(90deg,var(--t0),#1d3b4f)}
    .t1{background:linear-gradient(90deg,var(--t1),#0a5c41)}
    .t2{background:linear-gradient(90deg,var(--t2),#0a3157)}
    .t3{background:linear-gradient(90deg,var(--t3),#572d70)}
    .t4{background:linear-gradient(90deg,var(--t4),#174ea6)}
    .t5{background:linear-gradient(90deg,var(--t5),#8f0d16)}

    .tools-bar{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center}
    .progress-wrap{display:flex;align-items:center;gap:.5rem}
    .progress{height:.75rem;border-radius:999px}
    .search{max-width:380px}

    /* Subtle accountability link */
    .acct-link{font-size:.8rem; color:#6b7280; margin-left:.25rem}
    .acct-link i{margin-right:.3rem}
    .btn-row{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center}
  </style>
</head>
<body>

<!-- NAV -->
<nav class="navbar navbar-expand-lg bg-white border-bottom sticky-top" aria-label="Main">
  <div class="container">
    <a class="navbar-brand fw-bold" href="../index.html">Adam Neil Arafat for Congress - WA-10</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navMenu">
      <ul class="navbar-nav ms-auto align-items-lg-center">
        <li class="nav-item"><a class="nav-link" href="../digging-into-the-issues.html">Issues</a></li>
        <li class="nav-item"><a class="nav-link active" href="Bills/Bills.html" aria-current="page"><i class="fa-solid fa-tree me-1 text-success" aria-hidden="true"></i>Evergreen Pact</a></li>
        <li class="nav-item"><a class="nav-link" href="../contrast.html">Record &amp; Contrast</a></li>
        <li class="nav-item"><a class="nav-link" href="../contact.html">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- HERO -->
<header class="py-5 hero">
  <div class="container text-center">
    <h1 class="display-5 mb-2">ðŸŒ² The Evergreen Pact</h1>
    <p class="lead mb-3">Two ladders for 2027. Each step helps working people without raising their taxes. Each step adds checks on executive power.</p>

    <div class="d-flex justify-content-center gap-2 flex-wrap">
      <a class="btn btn-outline-light btn-pill fw-bold Overview-btn btn-icon"
         href="../Overview.html"
         target="_blank" rel="noopener noreferrer"
         aria-label="Open Evergreen Pact Overview">
        <i class="fa-solid fa-file-lines" aria-hidden="true"></i> Open Overview
      </a>
    </div>
  </div>
</header>

<!-- EXPLANATION -->
<section class="container my-4">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <h2 class="h4">What the Evergreen Pact is</h2>
      <p class="mb-2"><strong>The Evergreen Pact is triage, then reform.</strong> We stop the bleeding now, then install hard blocks, transparency, and oversight to restore checks and balances to the full legal extent using every lawful tool, even the obscure ones. Every step lowers costs for working people without raising their taxes and reins in executive power.</p>
    </div>
  </div>
</section>

<!-- HOW TO USE -->
<section class="container my-4">
  <div class="row g-3">
    <div class="col-lg-12">
      <h2 class="h4">How to use this page</h2>
      <p class="mb-2">You will see the current step only. Click Pass or Fail. The next active items appear and the displayed chances update. Each card shows two things in plain language:</p>
      <ul class="mb-0">
        <li><strong>For working people</strong> â€” the near-term benefit at home.</li>
        <li><strong>Checks on executive power</strong> â€” how it restores balance.</li>
      </ul>
    </div>
  </div>
</section>

<noscript>
  <section class="container my-4">
    <div class="alert alert-warning">
      This interactive plan needs JavaScript to reveal steps. You can still open the <a href="../Overview.html" target="_blank" rel="noopener noreferrer">static Overview</a>.
    </div>
  </section>
</noscript>

<!-- PATH TOOLBAR -->
<section class="container mb-3">
  <div class="tools-bar">
    <ul class="nav nav-pills me-auto" id="pathTabs" role="tablist" aria-label="Choose plan path">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="tabA" data-bs-toggle="tab" data-bs-target="#pathA" type="button" role="tab" aria-controls="pathA" aria-selected="true">Path A: House and Senate</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="tabB" data-bs-toggle="tab" data-bs-target="#pathB" type="button" role="tab" aria-controls="pathB" aria-selected="false">Path B: House only</button>
      </li>
    </ul>

    <div class="progress-wrap">
      <label for="search" class="visually-hidden">Search steps</label>
      <input id="search" class="form-control form-control-sm search" type="search" placeholder="Search current pathâ€¦" aria-label="Search current path">
    </div>

    <div class="form-check form-switch ms-2">
      <input class="form-check-input" type="checkbox" id="showAll">
      <label class="form-check-label" for="showAll">Preview all steps</label>
    </div>

    <button class="btn btn-outline-secondary btn-sm ms-2" id="resetPlan" type="button" aria-label="Reset plan decisions">Reset plan</button>
  </div>
</section>

<div class="tab-content">

  <!-- ================= PATH A ================= -->
  <!-- (UNCHANGED CONTENT FOR PATH A & PATH B CARDS â€” kept exactly as in your draft) -->
  <!-- I preserved all the cards and their data-* attributes as you provided.
       Only structural fixes were made above/below. -->
  <!-- BEGIN PATH A -->
  <!-- ... your full Path A markup exactly as provided above ... -->
  <!-- END PATH A -->

  <!-- ================= PATH B (House-only) ================= -->
  <!-- BEGIN PATH B -->
  <!-- ... your full Path B markup exactly as provided above ... -->
  <!-- END PATH B -->

</div>

<!-- CTA -->
<section class="py-5" style="background:#f8f9fa;">
  <div class="container">
    <div class="row g-4 text-center">
      <div class="col-md-6">
        <div class="p-4 h-100 rounded" style="background:#0b6e4f;color:#fff">
          <h2 class="h5 fw-bold mb-2">Join the fight</h2>
          <p class="mb-3">This campaign runs on people, not corporate political action committee money.</p>
          <a href="../contact.html" class="btn btn-light fw-bold" target="_blank" rel="noopener noreferrer">I will volunteer</a>
        </div>
      </div>
      <div class="col-md-6">
        <div class="p-4 h-100 rounded" style="background:#c1121f;color:#fff">
          <h2 class="h5 fw-bold mb-2">Power the pact</h2>
          <p class="mb-3">Every dollar fuels work that lowers costs and restores accountability.</p>
          <a href="https://secure.actblue.com/donate/adam-arafat-1" class="btn btn-light fw-bold" target="_blank" rel="noopener noreferrer">Chip in</a>
          <div class="small mt-2 text-light">Secure via ActBlue. People powered only.</div>
        </div>
      </div>
    </div>
  </div>
</section>

<footer>
  <div class="container text-center small">
    <p class="mb-1">Paid for by Adam Neil Arafat for Congress</p>
    <p class="mb-0">&copy; 2027 Adam Neil Arafat. All Rights Reserved.</p>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
<script>
  // ------- helpers
 <script>
  // ------- helpers
  const STORE_KEY = 'evergreen_plan_v2';

  function saveState(obj){ localStorage.setItem(STORE_KEY, JSON.stringify(obj)); }
  function loadState(){ try { return JSON.parse(localStorage.getItem(STORE_KEY)) || {}; } catch(e){ return {}; } }
  function clearState(){ localStorage.removeItem(STORE_KEY); }

  function oddsFlash(container){
    if(!container) return;
    container.querySelectorAll('.odds-now').forEach(s=>{
      s.classList.add('flash');
      setTimeout(()=>s.classList.remove('flash'), 600);
    });
  }

  function revealTargets(selectors, focusFirst=true){
    if(!selectors) return;
    const ids = selectors.split(',').map(s=>s.trim()).filter(Boolean);
    let firstEl = null;
    ids.forEach(sel=>{
      const el = document.querySelector(sel);
      if(!el) return;
      el.classList.remove('locked');
      el.classList.add('highlight');
      setTimeout(()=>el.classList.remove('highlight'), 1500);
      if(!firstEl) firstEl = el;
    });
    if(firstEl && focusFirst){
      const card = firstEl.querySelector('.card-step') || firstEl;
      try { card.focus({preventScroll:true}); } catch(_) {}
      try { firstEl.scrollIntoView({behavior:'smooth', block:'center'}); } catch(_) {}
    }
  }

  // choose a single value to display (don't overwrite repeatedly)
  function pickOddsValue(span, passed){
    const keys = passed
      ? ['pass','passB','passR','passStd']
      : ['fail','failB','failR','failStd'];
    for(const k of keys){
      const dataKey = k.replace(/[A-Z]/g, m => '-'+m.toLowerCase()); // passB -> pass-b
      const v = span.dataset[k] || span.dataset[dataKey];
      if(v) return v;
    }
    // if no variant, try the base shown value the author included
    return span.textContent || '';
  }

  function updateOdds(container, passed){
    if(!container) return;
    container.querySelectorAll('.odds-now').forEach(span=>{
      const next = pickOddsValue(span, passed);
      if(next) span.textContent = next;
    });
    oddsFlash(container);
  }

  function ensureEffectPanel(card, stepId){
    if(!card || card.querySelector('.effect-panel')) return;
    const panel = document.createElement('div');
    panel.className = 'collapse effect-panel mt-2';
    const panelId = 'eff-'+stepId;
    panel.id = panelId;
    panel.innerHTML = `
      <div class="effect-header" role="button" tabindex="0" data-target="#${panelId}" aria-controls="${panelId}" aria-expanded="false">
        <p class="effect-title mb-0">Details</p><i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
      </div>
      <div class="effect-body"></div>`;
    const body = card.querySelector('.card-body') || card;
    body.appendChild(panel);
  }

  function setEffect(card, title, lines){
    if(!card) return;
    const box = card.querySelector('.effect-panel');
    const body = card.querySelector('.effect-panel .effect-body');
    if(!box || !body) return;
    const list = Array.isArray(lines) ? lines : [String(lines||'')];
    body.innerHTML = '<strong>'+title+'</strong><ul class="mb-0 ps-3">'+list.map(l=>'<li>'+l+'</li>').join('')+'</ul>';
    const c = bootstrap.Collapse.getOrCreateInstance(box, {toggle:false});
    c.show();
    const hdr = card.querySelector('.effect-header');
    if(hdr){ hdr.setAttribute('aria-expanded','true'); }
  }

  function recordButtons(card, passed){
    if(!card) return;
    const buttons = card.querySelectorAll('.branch');
    buttons.forEach(b=>{
      b.disabled = true;
      b.textContent = 'Recorded';
      b.classList.remove('btn-success','btn-danger');
      b.classList.add('btn-secondary');
    });
    updateOdds(card, passed);
  }

  function applyDecision(stepId, passed, save=true){
    const cardWrap = document.getElementById(stepId);
    if(!cardWrap) return;
    const card = cardWrap.querySelector('.card-step') || cardWrap;

    const passBtn = card.querySelector('.branch.btn-success');
    const failBtn = card.querySelector('.branch.btn-danger');
    const btn = passed ? passBtn : failBtn;
    if(!btn) return;

    const nextSel = passed ? btn.getAttribute('data-pass') : btn.getAttribute('data-fail');
    const effTxt = passed ? btn.getAttribute('data-pass-effects') : btn.getAttribute('data-fail-effects');
    let lines = [];
    try { lines = effTxt ? JSON.parse(effTxt) : []; } catch(e){ lines = []; }

    ensureEffectPanel(card, stepId);
    setEffect(card, passed ? 'Effects of passage' : 'Effects of failure', lines);
    recordButtons(card, passed);

    if(save){
      const state = loadState();
      state[stepId] = passed ? 'pass' : 'fail';
      saveState(state);
    }
    revealTargets(nextSel, true);
    updateProgress();
  }

  function updateProgress(){
    ['A','B'].forEach(path=>{
      const scope = document.querySelector('[data-path="'+path+'"]');
      if(!scope) return;
      const all = scope.querySelectorAll('.card-step');
      let decided = 0;
      all.forEach(c=>{ if(c.querySelectorAll('.branch[disabled]').length > 0) decided += 1; });
      const totalCards = all.length;
      const bar = document.getElementById('progress'+path);
      const count = document.getElementById('count'+path);
      const total = document.getElementById('total'+path);
      if(bar){
        const pct = totalCards ? Math.round((decided/totalCards)*100) : 0;
        bar.style.width = pct+'%';
        bar.setAttribute('aria-valuenow', pct);
      }
      if(count) count.textContent = decided;
      if(total) total.textContent = totalCards;
    });
  }

  // ---------- delegated UI handlers (defensive)
  document.addEventListener('click', (e)=>{
    const header = e.target.closest?.('.effect-header');
    if(!header) return;
    const targetSel = header.getAttribute('data-target');
    if(!targetSel) return;
    const target = document.querySelector(targetSel);
    if(!target) return;
    const c = bootstrap.Collapse.getOrCreateInstance(target, {toggle:false});
    const expanded = header.getAttribute('aria-expanded') === 'true';
    c.toggle();
    header.setAttribute('aria-expanded', expanded ? 'false' : 'true');
  });

  document.addEventListener('click', (e)=>{
    const btn = e.target.closest?.('.branch');
    if(!btn) return;
    const card = btn.closest('.card-step');
    if(!card) return;
    const wrap = card.parentElement || card;
    const stepId = wrap.id || card.dataset.step;
    const passed = btn.classList.contains('btn-success');
    applyDecision(stepId, passed, true);
  });

  // ---------- init (runs only after DOM is fully parsed)
  document.addEventListener('DOMContentLoaded', ()=>{
    // If any of these controls are missing, safely skip listeners
    const search = document.getElementById('search');
    const showAll = document.getElementById('showAll');
    const resetPlan = document.getElementById('resetPlan');
    const pathTabs = document.getElementById('pathTabs');

    if(search){
      search.addEventListener('input', (e)=>{
        const term = e.target.value.toLowerCase().trim();
        const activePane = document.querySelector('.tab-pane.active');
        if(!activePane) return;
        activePane.querySelectorAll('.card-step').forEach(card=>{
          const text = card.innerText.toLowerCase();
          const wrap = card.closest('.col-md-4, .col-md-6');
          if(!wrap) return;
          const isShownByState = !wrap.classList.contains('locked') || (showAll && showAll.checked);
          const matches = !term || text.includes(term);
          wrap.style.display = (isShownByState && matches) ? '' : 'none';
        });
      });
    }

    if(showAll){
      showAll.addEventListener('change', ()=>{
        const activePane = document.querySelector('.tab-pane.active');
        if(!activePane) return;
        const preview = showAll.checked;
        activePane.querySelectorAll('.col-md-4.locked, .col-md-6.locked').forEach(el=>{
          if(preview){
            el.classList.remove('locked');
          } else {
            const id = el.id;
            const state = loadState();
            const revealedByState = !!state[id];
            if(!revealedByState) el.classList.add('locked');
          }
        });
        if(search) search.dispatchEvent(new Event('input'));
      });
    }

    if(resetPlan){
      resetPlan.addEventListener('click', ()=>{
        clearState();
        // re-lock everything except the initial seeds
        document.querySelectorAll('#pathA .col-md-4, #pathA .col-md-6, #pathB .col-md-4, #pathB .col-md-6')
          .forEach(el=>{
            el.classList.toggle('locked', !['A-G1','B-G1'].includes(el.id));
          });
        if(search) search.value = '';
        updateProgress();
        // focus the first visible seed
        const seed = document.getElementById('A-G1') || document.getElementById('B-G1');
        if(seed) seed.scrollIntoView({behavior:'smooth', block:'center'});
      });
    }

    if(pathTabs){
      pathTabs.addEventListener('click', ()=>{ setTimeout(updateProgress, 50); });
    }

    // Restore state; if no state yet, make sure seed cards are visible
    function ensureSeeds(){
      const seeds = ['A-G1','B-G1'];
      seeds.forEach(id=>{
        const el = document.getElementById(id);
        if(el) el.classList.remove('locked');
      });
    }

    function restoreState(){
      const state = loadState();
      const keys = Object.keys(state || {});
      if(keys.length === 0){
        ensureSeeds();
        return;
      }
      // apply in DOM order to preserve reveal flow
      const allWraps = Array.from(document.querySelectorAll('.card-step')).map(c=>c.parentElement.id).filter(Boolean);
      allWraps.forEach(id=>{
        if(state[id]){
          const passed = state[id] === 'pass';
          applyDecision(id, passed, false);
        }
      });
    }

    ensureSeeds();
    restoreState();
    updateProgress();
  });
</script>
</body>
</html>
